{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/alexforest/Desktop/FlightBooker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexforest/Desktop/FlightBooker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alexforest/Desktop/FlightBooker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alexforest/Desktop/FlightBooker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./BookedFlights.css';import BookedFlight from'../../components/BookedFlight/BookedFlight';import{connect}from'react-redux';import*as actionTypes from'../../store/actions';import Modal from'../../components/Modal/Modal';import axios from'axios';var BookedFlights=/*#__PURE__*/function(_React$Component){_inherits(BookedFlights,_React$Component);var _super=_createSuper(BookedFlights);function BookedFlights(){var _this;_classCallCheck(this,BookedFlights);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={modalVisible:false,removeId:null};return _this;}_createClass(BookedFlights,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('/BookedFlights').then(function(response){_this2.props.onInitBookedFlights(response);console.log(response);}).catch(function(err){console.log(err);});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this3=this;console.log(\"update\");axios.get('/BookedFlights').then(function(response){console.log(response.data.length,_this3.props.bFlights.length);if(_this3.props.bFlights.length!==response.data.length){console.log(\"updating...\");_this3.props.onInitBookedFlights(response);}});}},{key:\"setModalVisible\",value:function setModalVisible(removeId){this.setState({modalVisible:!this.state.modalVisible,removeId:removeId});}},{key:\"deleteFlight\",value:function deleteFlight(){var _this4=this;axios.delete('/BookedFlights',{data:{id:this.state.removeId}}).then(function(response){console.log(response);}).catch(function(err){console.log(err);});axios.get('/BookedFlights').then(function(response){_this4.props.onInitBookedFlights(response);console.log(response);}).catch(function(err){console.log(err);});this.setState({modalVisible:!this.state.modalVisible,removeId:null});}},{key:\"thirdFunction\",value:function thirdFunction(){this.setState({modalVisible:!this.state.modalVisible,removeId:null});}},{key:\"render\",value:function render(){var _this5=this;var removeBookedFlightMsg=/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to remove flight?\"});var modal=\"\";if(this.state.modalVisible){modal=/*#__PURE__*/_jsx(Modal,{message:removeBookedFlightMsg,click:function click(){return _this5.deleteFlight();},negativeClick:function negativeClick(){return _this5.thirdFunction();}});}var renderedFlights=\"\";if(this.props.bFlights!==\"Empty\"){renderedFlights=this.props.bFlights.map(function(el,i){return/*#__PURE__*/_jsx(BookedFlight,{carrier:el.carrier,dCity:el.dCity,aCity:el.aCity,date:el.date,passengers:el.passengers,bags:el.bags,carryOn:el.carryOn,totalPrice:el.totalPrice,click:function click(){return _this5.setModalVisible(el.id);}},el.id);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"BookedFlights\",children:[modal,/*#__PURE__*/_jsx(\"h2\",{children:\"Booked Flights\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bookedflights-list\",children:[/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Carrier\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Departure\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Arrival\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Passengers\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Bags\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Carry-Ons\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Price\"})]}),/*#__PURE__*/_jsx(\"br\",{}),renderedFlights]})]});}}]);return BookedFlights;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{bFlights:state.bookedFlights};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onRemoveFlight:function onRemoveFlight(removeId){return dispatch({type:actionTypes.REMOVE_BOOKED_FLIGHT,removeId:removeId});},onInitBookedFlights:function onInitBookedFlights(flights){return dispatch({type:actionTypes.INIT_BOOKED_FLIGHTS,flights:flights});}};};export default connect(mapStateToProps,mapDispatchToProps)(BookedFlights);","map":{"version":3,"sources":["/Users/alexforest/Desktop/FlightBooker/src/containers/BookedFlights/BookedFlights.js"],"names":["React","BookedFlight","connect","actionTypes","Modal","axios","BookedFlights","state","modalVisible","removeId","get","then","response","props","onInitBookedFlights","console","log","catch","err","data","length","bFlights","setState","delete","id","removeBookedFlightMsg","modal","deleteFlight","thirdFunction","renderedFlights","map","el","i","carrier","dCity","aCity","date","passengers","bags","carryOn","totalPrice","setModalVisible","Component","mapStateToProps","bookedFlights","mapDispatchToProps","dispatch","onRemoveFlight","type","REMOVE_BOOKED_FLIGHT","flights","INIT_BOOKED_FLIGHTS"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './BookedFlights.css';\nimport BookedFlight from '../../components/BookedFlight/BookedFlight';\nimport { connect } from 'react-redux';\nimport * as actionTypes from '../../store/actions';\nimport Modal from '../../components/Modal/Modal';\nimport axios from 'axios';\n\nclass BookedFlights extends React.Component {\n    state = {\n        modalVisible: false,\n        removeId: null\n    }\n\n    componentDidMount() {\n        axios.get('/BookedFlights')\n        .then(response => {\n            this.props.onInitBookedFlights(response);\n            console.log(response);\n        })\n        .catch(err => {\n            console.log(err);\n        })\n    }\n    componentDidUpdate() {\n        console.log(\"update\");\n        axios.get('/BookedFlights')\n        .then(response => {\n            console.log(response.data.length, this.props.bFlights.length);\n            if (this.props.bFlights.length !== response.data.length) {\n                console.log(\"updating...\");\n                this.props.onInitBookedFlights(response);\n            }\n        })\n    }\n\n    setModalVisible(removeId) {\n        this.setState({modalVisible: !this.state.modalVisible, removeId: removeId});\n    }\n\n    deleteFlight() {\n\n        axios.delete('/BookedFlights', { data: { id: this.state.removeId }})\n        .then(response => {\n            console.log(response);\n        })\n        .catch(err => {\n            console.log(err);\n        })\n        axios.get('/BookedFlights',)\n        .then(response => {\n            this.props.onInitBookedFlights(response);\n            console.log(response);\n        })\n        .catch(err => {\n            console.log(err);\n        })\n\n        this.setState({modalVisible: !this.state.modalVisible, removeId: null})\n    }\n\n    thirdFunction() {\n        this.setState({modalVisible: !this.state.modalVisible, removeId: null})\n    }\n\n    render() {\n        \n        let removeBookedFlightMsg = <p>Are you sure you want to remove flight?</p>;\n        let modal = \"\";\n        if (this.state.modalVisible) {\n            modal = <Modal message={removeBookedFlightMsg} click={() => this.deleteFlight()} negativeClick={() => this.thirdFunction()}/>\n        }\n        \n        let renderedFlights = \"\";\n        if (this.props.bFlights !== \"Empty\") {\n            renderedFlights = this.props.bFlights.map((el, i) => {\n                return <BookedFlight \n                            carrier={el.carrier}\n                            dCity={el.dCity}\n                            aCity={el.aCity}\n                            date={el.date}\n                            passengers={el.passengers}\n                            bags={el.bags}\n                            carryOn={el.carryOn}\n                            totalPrice={el.totalPrice}\n                            key={el.id}\n                            click={() => this.setModalVisible(el.id)}\n                            />\n            })\n        }\n\n\n        return (\n            <div className=\"BookedFlights\" >\n                {modal}\n                <h2>Booked Flights</h2>\n                <div className=\"bookedflights-list\">\n                    <ul>\n                        <li>Carrier</li>\n                        <li>Departure</li>\n                        <li>Arrival</li>\n                        <li>Date</li>\n                        <li>Passengers</li>\n                        <li>Bags</li>\n                        <li>Carry-Ons</li>\n                        <li>Price</li>\n                    </ul>\n                    <br />\n                    {renderedFlights}\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        bFlights: state.bookedFlights\n    }\n}\nconst mapDispatchToProps = dispatch => {\n    return {\n        onRemoveFlight: (removeId) => dispatch({type: actionTypes.REMOVE_BOOKED_FLIGHT, removeId}),\n        onInitBookedFlights: (flights) => dispatch({type: actionTypes.INIT_BOOKED_FLIGHTS, flights})\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BookedFlights);"]},"metadata":{},"sourceType":"module"}