{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/alexforest/Desktop/FlightBooker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexforest/Desktop/FlightBooker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alexforest/Desktop/FlightBooker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alexforest/Desktop/FlightBooker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import'./SelectFlight.css';import React from'react';import{connect}from'react-redux';import FlightOptions from'../FlightOptions/FlightOptions';import*as actionTypes from'../../store/actions';import blackPlane from'../../assets/blackplane1.png';import Modal from'../Modal/Modal';import axios from'axios';var SelectFlight=/*#__PURE__*/function(_React$Component){_inherits(SelectFlight,_React$Component);var _super=_createSuper(SelectFlight);function SelectFlight(){var _this;_classCallCheck(this,SelectFlight);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isClickable:false,modalVisible:false,reRender:false};_this.onChangeHandler=function(e){_this.props.onSetClass(e.target.value);};_this.purchaseFlight=function(){var flightData={carrier:_this.props.sFlight.carrier,dCity:_this.props.sFlight.dCity,aCity:_this.props.sFlight.aCity,date:_this.props.sFlight.date,passengers:_this.props.options.passengers,bags:_this.props.options.bags,carryOn:_this.props.options.carryOn,class:_this.props.options.class,price:_this.props.totalPrice,id:Math.random()};axios.post('https://peaceful-hollows-15789.herokuapp.com/BookedFlights',flightData).then(function(response){console.log(response);}).catch(function(err){console.log(err);});_this.props.onBookFlight();axios.get('https://peaceful-hollows-15789.herokuapp.com/BookedFlights').then(function(response){_this.props.onInitBookedFlights(response);});_this.setState({modalVisible:!_this.state.modalVisible});};return _this;}_createClass(SelectFlight,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){//console.log(prevProps);\nif(prevProps.sFlight!==this.props.sFlight&&prevProps.sFlight!==null&&this.props.sFlight!==null){this.resetComponent();}}},{key:\"resetComponent\",value:function resetComponent(){this.setState({reRender:!this.state.reRender});}},{key:\"setModalVisible\",value:function setModalVisible(){this.setState({modalVisible:!this.state.modalVisible});}},{key:\"render\",value:function render(){var _this2=this;var selFlight=/*#__PURE__*/_jsx(\"div\",{className:\"selFlight\"});if(this.props.sFlight!==null){selFlight=/*#__PURE__*/_jsxs(\"div\",{className:\"selFlight\",children:[/*#__PURE__*/_jsx(\"div\",{children:this.props.sFlight.carrier}),/*#__PURE__*/_jsx(\"div\",{style:{textTransform:\"uppercase\"},children:this.props.sFlight.dCity}),/*#__PURE__*/_jsx(\"div\",{children:\"to\"}),/*#__PURE__*/_jsx(\"div\",{style:{textTransform:\"uppercase\"},children:this.props.sFlight.aCity}),/*#__PURE__*/_jsx(\"div\",{children:this.props.sFlight.date}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",this.props.sFlight.price]}),/*#__PURE__*/_jsx(\"div\",{className:\"X\",onClick:function onClick(){return _this2.props.onRemoveFlight();},children:\"X\"})]});}var userOptions=\"\";if(this.props.sFlight!==null){userOptions=/*#__PURE__*/_jsx(FlightOptions,{passengers:this.props.options.passengers,bags:this.props.options.bags,carryOn:this.props.options.carryOn,class:this.props.options.class,price:this.props.totalPrice});}var message=/*#__PURE__*/_jsxs(\"p\",{children:[\"Book flight to \",this.props.sFlight===null?\"\":this.props.sFlight.aCity,\" for $\",this.props.totalPrice,\"?\"]});var modal=\"\";if(this.state.modalVisible){modal=/*#__PURE__*/_jsx(Modal,{message:message,click:function click(){return _this2.purchaseFlight();},negativeClick:function negativeClick(){return _this2.setModalVisible();}});}var flightSelectDisplay=/*#__PURE__*/_jsxs(\"div\",{className:\"selFlight\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"please-select-flight\",children:\"Please Select Flight\"}),/*#__PURE__*/_jsx(\"img\",{src:blackPlane,alt:\"pic\",className:\"img1\"})]});if(this.props.sFlight!==null){/* if (this.state.reRender) {\n            this.delay();\n        } else { */flightSelectDisplay=/*#__PURE__*/_jsxs(\"div\",{children:[modal,/*#__PURE__*/_jsxs(\"div\",{className:\"fade\",children:[selFlight,/*#__PURE__*/_jsxs(\"div\",{className:\"controls-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"passenger-label\",children:\"Passengers\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bag-label\",children:\"Bags\"}),/*#__PURE__*/_jsx(\"div\",{className:\"carry-label\",children:\"Carry-Ons\"}),/*#__PURE__*/_jsx(\"div\",{className:\"class-label\",children:\"Class\"}),/*#__PURE__*/_jsx(\"div\",{className:\"price-label\",children:\"Price\"}),/*#__PURE__*/_jsx(\"div\",{className:\"controls2\",children:userOptions}),/*#__PURE__*/_jsxs(\"div\",{className:\"btns-container1 btns-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"increment-btn\",onClick:function onClick(){return _this2.props.onPassengerIncrement();},disabled:this.props.sFlight===null||this.props.options.passengers<1?true:false,children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{className:\"decrement-btn\",onClick:function onClick(){return _this2.props.onPassengerDecrement();},disabled:this.props.sFlight===null||this.props.options.passengers<=1?true:false,children:\"-\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btns-container2 btns-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"increment-btn\",onClick:function onClick(){return _this2.props.onBagIncrement();},disabled:this.props.sFlight===null?true:false,children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{className:\"decrement-btn\",onClick:function onClick(){return _this2.props.onBagDecrement();},disabled:this.props.sFlight===null||this.props.options.bags===0?true:false,children:\"-\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btns-container3 btns-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"increment-btn\",onClick:function onClick(){return _this2.props.onCarryOnIncrement();},disabled:this.props.sFlight===null?true:false,children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{className:\"decrement-btn\",onClick:function onClick(){return _this2.props.onCarryOnDecrement();},disabled:this.props.sFlight===null||this.props.options.carryOn===0?true:false,children:\"-\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btns-container btns-container4\",children:/*#__PURE__*/_jsxs(\"select\",{onChange:this.onChangeHandler,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Coach\",children:\"Coach\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Second\",children:\"Second Class\"}),/*#__PURE__*/_jsx(\"option\",{value:\"First\",children:\"First Class\"})]})}),/*#__PURE__*/_jsxs(\"p\",{className:\"additional-passengers\",children:[\"Additional\",/*#__PURE__*/_jsx(\"br\",{}),\" Passengers:\",/*#__PURE__*/_jsx(\"br\",{}),\"Ticket Price x2\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"additional-bags\",children:\"50$/each\"}),/*#__PURE__*/_jsx(\"p\",{className:\"additional-carry\",children:\"30$/each\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"class-prices\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Coach: Free\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Second Class: $100\"}),/*#__PURE__*/_jsx(\"p\",{children:\"First Class: $200\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"Bookbtn\",onClick:function onClick(){return _this2.setModalVisible();},children:\"Book\"})]})]});}return/*#__PURE__*/_jsx(\"div\",{className:\"SelectFlightContainer\",children:flightSelectDisplay});}}]);return SelectFlight;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{sFlight:state.selectedFlight,options:state.options,totalPrice:state.totalPrice,bFlights:state.bookedFlights};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onPassengerIncrement:function onPassengerIncrement(){return dispatch({type:actionTypes.PASSENGER_INCREMENT});},onPassengerDecrement:function onPassengerDecrement(){return dispatch({type:actionTypes.PASSENGER_DECREMENT});},onBagIncrement:function onBagIncrement(){return dispatch({type:actionTypes.BAG_INCREMENT});},onBagDecrement:function onBagDecrement(){return dispatch({type:actionTypes.BAG_DECREMENT});},onCarryOnIncrement:function onCarryOnIncrement(){return dispatch({type:actionTypes.CARRYON_INCREMENT});},onCarryOnDecrement:function onCarryOnDecrement(){return dispatch({type:actionTypes.CARRYON_DECREMENT});},onSetClass:function onSetClass(val){return dispatch({type:actionTypes.SET_CLASS,val:val});},onRemoveFlight:function onRemoveFlight(){return dispatch({type:actionTypes.REMOVE_FLIGHT});},/* onBookFlight: (carrier, dCity, aCity, date, passengers, bags, carryOn, classType, totalPrice) => dispatch({type: actionTypes.BOOK_FLIGHT, flightData: {\n            carrier: carrier, \n            dCity: dCity, \n            aCity: aCity, \n            date: date, \n            passengers: passengers,\n            bags: bags,\n            carryOn: carryOn,\n            class: classType,\n            totalPrice: totalPrice\n            }\n        }), */onBookFlight:function onBookFlight(){return dispatch({type:actionTypes.BOOK_FLIGHT});},onInitBookedFlights:function onInitBookedFlights(flights){return dispatch({type:actionTypes.INIT_BOOKED_FLIGHTS,flights:flights});}};};export default connect(mapStateToProps,mapDispatchToProps)(SelectFlight);","map":{"version":3,"sources":["/Users/alexforest/Desktop/FlightBooker/src/components/SelectFlight/SelectFlight.js"],"names":["React","connect","FlightOptions","actionTypes","blackPlane","Modal","axios","SelectFlight","state","isClickable","modalVisible","reRender","onChangeHandler","e","props","onSetClass","target","value","purchaseFlight","flightData","carrier","sFlight","dCity","aCity","date","passengers","options","bags","carryOn","class","price","totalPrice","id","Math","random","post","then","response","console","log","catch","err","onBookFlight","get","onInitBookedFlights","setState","prevProps","resetComponent","selFlight","textTransform","onRemoveFlight","userOptions","message","modal","setModalVisible","flightSelectDisplay","onPassengerIncrement","onPassengerDecrement","onBagIncrement","onBagDecrement","onCarryOnIncrement","onCarryOnDecrement","Component","mapStateToProps","selectedFlight","bFlights","bookedFlights","mapDispatchToProps","dispatch","type","PASSENGER_INCREMENT","PASSENGER_DECREMENT","BAG_INCREMENT","BAG_DECREMENT","CARRYON_INCREMENT","CARRYON_DECREMENT","val","SET_CLASS","REMOVE_FLIGHT","BOOK_FLIGHT","flights","INIT_BOOKED_FLIGHTS"],"mappings":"4rBAAA,MAAO,oBAAP,CACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,aAAP,KAA0B,gCAA1B,CACA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,qBAA7B,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,gBAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GAEMC,CAAAA,Y,+VACFC,K,CAAQ,CACJC,WAAW,CAAE,KADT,CAEJC,YAAY,CAAE,KAFV,CAGJC,QAAQ,CAAE,KAHN,C,OAkBRC,e,CAAkB,SAACC,CAAD,CAAO,CACrB,MAAKC,KAAL,CAAWC,UAAX,CAAsBF,CAAC,CAACG,MAAF,CAASC,KAA/B,EACH,C,OAMDC,c,CAAiB,UAAM,CACnB,GAAIC,CAAAA,UAAU,CAAG,CACbC,OAAO,CAAE,MAAKN,KAAL,CAAWO,OAAX,CAAmBD,OADf,CAEbE,KAAK,CAAE,MAAKR,KAAL,CAAWO,OAAX,CAAmBC,KAFb,CAGbC,KAAK,CAAE,MAAKT,KAAL,CAAWO,OAAX,CAAmBE,KAHb,CAIbC,IAAI,CAAE,MAAKV,KAAL,CAAWO,OAAX,CAAmBG,IAJZ,CAKbC,UAAU,CAAE,MAAKX,KAAL,CAAWY,OAAX,CAAmBD,UALlB,CAMbE,IAAI,CAAE,MAAKb,KAAL,CAAWY,OAAX,CAAmBC,IANZ,CAObC,OAAO,CAAE,MAAKd,KAAL,CAAWY,OAAX,CAAmBE,OAPf,CAQbC,KAAK,CAAE,MAAKf,KAAL,CAAWY,OAAX,CAAmBG,KARb,CASbC,KAAK,CAAE,MAAKhB,KAAL,CAAWiB,UATL,CAUbC,EAAE,CAAEC,IAAI,CAACC,MAAL,EAVS,CAAjB,CAaA5B,KAAK,CAAC6B,IAAN,CAAW,4DAAX,CAAyEhB,UAAzE,EACCiB,IADD,CACM,SAAAC,QAAQ,CAAI,CACdC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACH,CAHD,EAICG,KAJD,CAIO,SAAAC,GAAG,CAAI,CACVH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACH,CAND,EAOA,MAAK3B,KAAL,CAAW4B,YAAX,GACApC,KAAK,CAACqC,GAAN,CAAU,4DAAV,EACCP,IADD,CACM,SAAAC,QAAQ,CAAI,CACd,MAAKvB,KAAL,CAAW8B,mBAAX,CAA+BP,QAA/B,EACH,CAHD,EAIA,MAAKQ,QAAL,CAAc,CAACnC,YAAY,CAAE,CAAC,MAAKF,KAAL,CAAWE,YAA3B,CAAd,EACH,C,sGA/CkBoC,S,CAAW,CAC1B;AACA,GAAIA,SAAS,CAACzB,OAAV,GAAsB,KAAKP,KAAL,CAAWO,OAAjC,EAA4CyB,SAAS,CAACzB,OAAV,GAAsB,IAAlE,EAA0E,KAAKP,KAAL,CAAWO,OAAX,GAAuB,IAArG,CAA2G,CACvG,KAAK0B,cAAL,GACH,CAEJ,C,uDAEgB,CACb,KAAKF,QAAL,CAAc,CAAClC,QAAQ,CAAE,CAAC,KAAKH,KAAL,CAAWG,QAAvB,CAAd,EACH,C,yDAMiB,CACd,KAAKkC,QAAL,CAAc,CAACnC,YAAY,CAAE,CAAC,KAAKF,KAAL,CAAWE,YAA3B,CAAd,EACH,C,uCA+BQ,iBACT,GAAIsC,CAAAA,SAAS,cAAG,YAAK,SAAS,CAAC,WAAf,EAAhB,CACA,GAAI,KAAKlC,KAAL,CAAWO,OAAX,GAAuB,IAA3B,CAAiC,CAC7B2B,SAAS,cAAG,aAAK,SAAS,CAAC,WAAf,wBACI,qBAAM,KAAKlC,KAAL,CAAWO,OAAX,CAAmBD,OAAzB,EADJ,cAEI,YAAK,KAAK,CAAE,CAAC6B,aAAa,CAAE,WAAhB,CAAZ,UAA2C,KAAKnC,KAAL,CAAWO,OAAX,CAAmBC,KAA9D,EAFJ,cAGI,2BAHJ,cAII,YAAK,KAAK,CAAE,CAAC2B,aAAa,CAAE,WAAhB,CAAZ,UAA2C,KAAKnC,KAAL,CAAWO,OAAX,CAAmBE,KAA9D,EAJJ,cAKI,qBAAM,KAAKT,KAAL,CAAWO,OAAX,CAAmBG,IAAzB,EALJ,cAMI,2BAAO,KAAKV,KAAL,CAAWO,OAAX,CAAmBS,KAA1B,GANJ,cAOI,YAAK,SAAS,CAAC,GAAf,CAAmB,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAChB,KAAL,CAAWoC,cAAX,EAAN,EAA5B,eAPJ,GAAZ,CASH,CAED,GAAIC,CAAAA,WAAW,CAAG,EAAlB,CACA,GAAI,KAAKrC,KAAL,CAAWO,OAAX,GAAuB,IAA3B,CAAiC,CAC7B8B,WAAW,cAAG,KAAC,aAAD,EACd,UAAU,CAAE,KAAKrC,KAAL,CAAWY,OAAX,CAAmBD,UADjB,CAEd,IAAI,CAAE,KAAKX,KAAL,CAAWY,OAAX,CAAmBC,IAFX,CAGd,OAAO,CAAE,KAAKb,KAAL,CAAWY,OAAX,CAAmBE,OAHd,CAId,KAAK,CAAE,KAAKd,KAAL,CAAWY,OAAX,CAAmBG,KAJZ,CAKd,KAAK,CAAE,KAAKf,KAAL,CAAWiB,UALJ,EAAd,CAOH,CAED,GAAIqB,CAAAA,OAAO,cAAG,uCAAmB,KAAKtC,KAAL,CAAWO,OAAX,GAAuB,IAAvB,CAA8B,EAA9B,CAAmC,KAAKP,KAAL,CAAWO,OAAX,CAAmBE,KAAzE,UAAsF,KAAKT,KAAL,CAAWiB,UAAjG,OAAd,CACA,GAAIsB,CAAAA,KAAK,CAAG,EAAZ,CACA,GAAI,KAAK7C,KAAL,CAAWE,YAAf,CAA6B,CACzB2C,KAAK,cAAG,KAAC,KAAD,EAAO,OAAO,CAAED,OAAhB,CAAyB,KAAK,CAAE,uBAAM,CAAA,MAAI,CAAClC,cAAL,EAAN,EAAhC,CAA6D,aAAa,CAAE,+BAAM,CAAA,MAAI,CAACoC,eAAL,EAAN,EAA5E,EAAR,CACH,CAED,GAAIC,CAAAA,mBAAmB,cACnB,aAAK,SAAS,CAAC,WAAf,wBACI,WAAI,SAAS,CAAC,sBAAd,kCADJ,cAEI,YAAK,GAAG,CAAEnD,UAAV,CAAsB,GAAG,CAAC,KAA1B,CAAgC,SAAS,CAAC,MAA1C,EAFJ,GADJ,CAMA,GAAI,KAAKU,KAAL,CAAWO,OAAX,GAAuB,IAA3B,CAAiC,CAC7B;AACR;AACA,mBACQkC,mBAAmB,cACnB,uBACKF,KADL,cAEI,aAAK,SAAS,CAAC,MAAf,WACKL,SADL,cAEI,aAAK,SAAS,CAAC,oBAAf,wBACI,YAAK,SAAS,CAAC,iBAAf,wBADJ,cAEI,YAAK,SAAS,CAAC,WAAf,kBAFJ,cAGI,YAAK,SAAS,CAAC,aAAf,uBAHJ,cAII,YAAK,SAAS,CAAC,aAAf,mBAJJ,cAKI,YAAK,SAAS,CAAC,aAAf,mBALJ,cAMI,YAAK,SAAS,CAAC,WAAf,UACKG,WADL,EANJ,cASQ,aAAK,SAAS,CAAC,gCAAf,wBACI,eAAQ,SAAS,CAAC,eAAlB,CAAkC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACrC,KAAL,CAAW0C,oBAAX,EAAN,EAA3C,CAAoF,QAAQ,CAAE,KAAK1C,KAAL,CAAWO,OAAX,GAAuB,IAAvB,EAA+B,KAAKP,KAAL,CAAWY,OAAX,CAAmBD,UAAnB,CAAgC,CAA/D,CAAmE,IAAnE,CAA0E,KAAxK,eADJ,cAEI,eAAQ,SAAS,CAAC,eAAlB,CAAkC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACX,KAAL,CAAW2C,oBAAX,EAAN,EAA3C,CAAoF,QAAQ,CAAE,KAAK3C,KAAL,CAAWO,OAAX,GAAuB,IAAvB,EAA+B,KAAKP,KAAL,CAAWY,OAAX,CAAmBD,UAAnB,EAAiC,CAAhE,CAAoE,IAApE,CAA2E,KAAzK,eAFJ,GATR,cAaQ,aAAK,SAAS,CAAC,gCAAf,wBACI,eAAQ,SAAS,CAAC,eAAlB,CAAkC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACX,KAAL,CAAW4C,cAAX,EAAN,EAA3C,CAA8E,QAAQ,CAAE,KAAK5C,KAAL,CAAWO,OAAX,GAAuB,IAAvB,CAA8B,IAA9B,CAAqC,KAA7H,eADJ,cAEI,eAAQ,SAAS,CAAC,eAAlB,CAAkC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACP,KAAL,CAAW6C,cAAX,EAAN,EAA3C,CAA8E,QAAQ,CAAE,KAAK7C,KAAL,CAAWO,OAAX,GAAuB,IAAvB,EAA+B,KAAKP,KAAL,CAAWY,OAAX,CAAmBC,IAAnB,GAA4B,CAA3D,CAA+D,IAA/D,CAAsE,KAA9J,eAFJ,GAbR,cAiBQ,aAAK,SAAS,CAAC,gCAAf,wBACI,eAAQ,SAAS,CAAC,eAAlB,CAAkC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACb,KAAL,CAAW8C,kBAAX,EAAN,EAA3C,CAAkF,QAAQ,CAAE,KAAK9C,KAAL,CAAWO,OAAX,GAAuB,IAAvB,CAA8B,IAA9B,CAAqC,KAAjI,eADJ,cAEI,eAAQ,SAAS,CAAC,eAAlB,CAAkC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACP,KAAL,CAAW+C,kBAAX,EAAN,EAA3C,CAAkF,QAAQ,CAAE,KAAK/C,KAAL,CAAWO,OAAX,GAAuB,IAAvB,EAA+B,KAAKP,KAAL,CAAWY,OAAX,CAAmBE,OAAnB,GAA+B,CAA9D,CAAkE,IAAlE,CAAyE,KAArK,eAFJ,GAjBR,cAqBQ,YAAK,SAAS,CAAC,gCAAf,uBACI,gBAAQ,QAAQ,CAAE,KAAKhB,eAAvB,wBACI,eAAQ,KAAK,CAAC,OAAd,mBADJ,cAEI,eAAQ,KAAK,CAAC,QAAd,0BAFJ,cAGI,eAAQ,KAAK,CAAC,OAAd,yBAHJ,GADJ,EArBR,cA6BQ,WAAG,SAAS,CAAC,uBAAb,qCAA+C,aAA/C,6BAAiE,aAAjE,qBA7BR,cA8BQ,UAAG,SAAS,CAAC,iBAAb,sBA9BR,cA+BQ,UAAG,SAAS,CAAC,kBAAb,sBA/BR,cAgCQ,aAAK,SAAS,CAAC,cAAf,wBACI,kCADJ,cAEI,yCAFJ,cAGI,wCAHJ,GAhCR,GAFJ,cAwCQ,eAAQ,SAAS,CAAC,SAAlB,CAA4B,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC0C,eAAL,EAAN,EAArC,kBAxCR,GAFJ,GADA,CA+CH,CAED,mBAEI,YAAK,SAAS,CAAC,uBAAf,UACKC,mBADL,EAFJ,CAMC,C,0BAxJsBvD,KAAK,CAAC8D,S,EA2JjC,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAvD,KAAK,CAAI,CAC7B,MAAO,CACHa,OAAO,CAAEb,KAAK,CAACwD,cADZ,CAEHtC,OAAO,CAAElB,KAAK,CAACkB,OAFZ,CAGHK,UAAU,CAAEvB,KAAK,CAACuB,UAHf,CAIHkC,QAAQ,CAAEzD,KAAK,CAAC0D,aAJb,CAAP,CAMH,CAPD,CASA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACnC,MAAO,CACHZ,oBAAoB,CAAE,sCAAMY,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAElE,WAAW,CAACmE,mBAAnB,CAAD,CAAd,EADnB,CAEHb,oBAAoB,CAAE,sCAAMW,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAElE,WAAW,CAACoE,mBAAnB,CAAD,CAAd,EAFnB,CAGHb,cAAc,CAAE,gCAAMU,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAElE,WAAW,CAACqE,aAAnB,CAAD,CAAd,EAHb,CAIHb,cAAc,CAAE,gCAAMS,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAElE,WAAW,CAACsE,aAAnB,CAAD,CAAd,EAJb,CAKHb,kBAAkB,CAAE,oCAAMQ,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAElE,WAAW,CAACuE,iBAAnB,CAAD,CAAd,EALjB,CAMHb,kBAAkB,CAAE,oCAAMO,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAElE,WAAW,CAACwE,iBAAnB,CAAD,CAAd,EANjB,CAOH5D,UAAU,CAAE,oBAAC6D,GAAD,QAASR,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAElE,WAAW,CAAC0E,SAAnB,CAA8BD,GAAG,CAAHA,GAA9B,CAAD,CAAjB,EAPT,CAQH1B,cAAc,CAAE,gCAAMkB,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAElE,WAAW,CAAC2E,aAAnB,CAAD,CAAd,EARb,CASH;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cACQpC,YAAY,CAAE,8BAAM0B,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAElE,WAAW,CAAC4E,WAAnB,CAAD,CAAd,EArBX,CAsBHnC,mBAAmB,CAAE,6BAACoC,OAAD,QAAaZ,CAAAA,QAAQ,CAAC,CAACC,IAAI,CAAElE,WAAW,CAAC8E,mBAAnB,CAAwCD,OAAO,CAAPA,OAAxC,CAAD,CAArB,EAtBlB,CAAP,CAwBH,CAzBD,CA2BA,cAAe/E,CAAAA,OAAO,CAAC8D,eAAD,CAAkBI,kBAAlB,CAAP,CAA6C5D,YAA7C,CAAf","sourcesContent":["import './SelectFlight.css';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport FlightOptions from '../FlightOptions/FlightOptions';\nimport * as actionTypes from '../../store/actions';\nimport blackPlane from '../../assets/blackplane1.png';\nimport Modal from '../Modal/Modal';\nimport axios from 'axios';\n\nclass SelectFlight extends React.Component {\n    state = {\n        isClickable: false,\n        modalVisible: false,\n        reRender: false\n    }\n\n    componentDidUpdate(prevProps) {\n        //console.log(prevProps);\n        if (prevProps.sFlight !== this.props.sFlight && prevProps.sFlight !== null && this.props.sFlight !== null) {\n            this.resetComponent();\n        }\n\n    }\n\n    resetComponent() {\n        this.setState({reRender: !this.state.reRender})\n    }\n\n    onChangeHandler = (e) => {\n        this.props.onSetClass(e.target.value);\n    }\n\n    setModalVisible() {\n        this.setState({modalVisible: !this.state.modalVisible})\n    }\n\n    purchaseFlight = () => {\n        let flightData = { \n            carrier: this.props.sFlight.carrier, \n            dCity: this.props.sFlight.dCity, \n            aCity: this.props.sFlight.aCity, \n            date: this.props.sFlight.date, \n            passengers: this.props.options.passengers, \n            bags: this.props.options.bags, \n            carryOn: this.props.options.carryOn, \n            class: this.props.options.class, \n            price: this.props.totalPrice,\n            id: Math.random() \n        };\n\n        axios.post('https://peaceful-hollows-15789.herokuapp.com/BookedFlights', flightData)\n        .then(response => {\n            console.log(response);\n        })\n        .catch(err => {\n            console.log(err);\n        });\n        this.props.onBookFlight();\n        axios.get('https://peaceful-hollows-15789.herokuapp.com/BookedFlights')\n        .then(response => {\n            this.props.onInitBookedFlights(response);\n        })\n        this.setState({modalVisible: !this.state.modalVisible});\n    }\n\n    render() {\n    let selFlight = <div className=\"selFlight\"></div>;\n    if (this.props.sFlight !== null) {\n        selFlight = <div className=\"selFlight\">\n                        <div>{this.props.sFlight.carrier}</div>\n                        <div style={{textTransform: \"uppercase\"}}>{this.props.sFlight.dCity}</div>\n                        <div>to</div>\n                        <div style={{textTransform: \"uppercase\"}}>{this.props.sFlight.aCity}</div>\n                        <div>{this.props.sFlight.date}</div>\n                        <div>${this.props.sFlight.price}</div>\n                        <div className=\"X\" onClick={() => this.props.onRemoveFlight()}>X</div>\n                    </div>;\n    }\n    \n    let userOptions = \"\";\n    if (this.props.sFlight !== null) {\n        userOptions = <FlightOptions \n        passengers={this.props.options.passengers}\n        bags={this.props.options.bags}\n        carryOn={this.props.options.carryOn}\n        class={this.props.options.class}\n        price={this.props.totalPrice}\n        />\n    }\n\n    let message = <p>Book flight to {this.props.sFlight === null ? \"\" : this.props.sFlight.aCity} for ${this.props.totalPrice}?</p>;\n    let modal = \"\";\n    if (this.state.modalVisible) {\n        modal = <Modal message={message} click={() => this.purchaseFlight()} negativeClick={() => this.setModalVisible()}/>\n    }\n\n    let flightSelectDisplay = \n        <div className=\"selFlight\">\n            <h1 className=\"please-select-flight\">Please Select Flight</h1>\n            <img src={blackPlane} alt=\"pic\" className=\"img1\"></img>    \n        </div>;\n\n    if (this.props.sFlight !== null) {\n        /* if (this.state.reRender) {\n            this.delay();\n        } else { */\n        flightSelectDisplay =\n        <div>\n            {modal}\n            <div className=\"fade\">\n                {selFlight}\n                <div className=\"controls-container\">\n                    <div className=\"passenger-label\">Passengers</div>\n                    <div className=\"bag-label\">Bags</div>\n                    <div className=\"carry-label\">Carry-Ons</div>\n                    <div className=\"class-label\">Class</div>\n                    <div className=\"price-label\">Price</div>\n                    <div className=\"controls2\">\n                        {userOptions}\n                    </div>\n                        <div className=\"btns-container1 btns-container\">\n                            <button className=\"increment-btn\" onClick={() => this.props.onPassengerIncrement()} disabled={this.props.sFlight === null || this.props.options.passengers < 1 ? true : false}>+</button>\n                            <button className=\"decrement-btn\" onClick={() => this.props.onPassengerDecrement()} disabled={this.props.sFlight === null || this.props.options.passengers <= 1 ? true : false}>-</button>\n                        </div>\n                        <div className=\"btns-container2 btns-container\">\n                            <button className=\"increment-btn\" onClick={() => this.props.onBagIncrement()} disabled={this.props.sFlight === null ? true : false}>+</button>\n                            <button className=\"decrement-btn\" onClick={() => this.props.onBagDecrement()} disabled={this.props.sFlight === null || this.props.options.bags === 0 ? true : false}>-</button>\n                        </div>\n                        <div className=\"btns-container3 btns-container\">\n                            <button className=\"increment-btn\" onClick={() => this.props.onCarryOnIncrement()} disabled={this.props.sFlight === null ? true : false}>+</button>\n                            <button className=\"decrement-btn\" onClick={() => this.props.onCarryOnDecrement()} disabled={this.props.sFlight === null || this.props.options.carryOn === 0 ? true : false}>-</button>\n                        </div>\n                        <div className=\"btns-container btns-container4\">\n                            <select onChange={this.onChangeHandler}>\n                                <option value=\"Coach\">Coach</option>\n                                <option value=\"Second\">Second Class</option>\n                                <option value=\"First\">First Class</option>\n                            </select>\n                        </div>\n                        \n                        <p className=\"additional-passengers\">Additional<br /> Passengers:<br />Ticket Price x2</p>\n                        <p className=\"additional-bags\">50$/each</p>\n                        <p className=\"additional-carry\">30$/each</p>\n                        <div className=\"class-prices\">\n                            <p>Coach: Free</p>\n                            <p>Second Class: $100</p>\n                            <p>First Class: $200</p>\n                        </div>\n                </div>\n                    <button className=\"Bookbtn\" onClick={() => this.setModalVisible()}>Book</button>\n            </div>\n    </div>\n        \n    }\n\n    return (\n        \n        <div className=\"SelectFlightContainer\">\n            {flightSelectDisplay}\n        </div>\n    )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        sFlight: state.selectedFlight,\n        options: state.options,\n        totalPrice: state.totalPrice,\n        bFlights: state.bookedFlights\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onPassengerIncrement: () => dispatch({type: actionTypes.PASSENGER_INCREMENT}),\n        onPassengerDecrement: () => dispatch({type: actionTypes.PASSENGER_DECREMENT}),\n        onBagIncrement: () => dispatch({type: actionTypes.BAG_INCREMENT}),\n        onBagDecrement: () => dispatch({type: actionTypes.BAG_DECREMENT}),\n        onCarryOnIncrement: () => dispatch({type: actionTypes.CARRYON_INCREMENT}),\n        onCarryOnDecrement: () => dispatch({type: actionTypes.CARRYON_DECREMENT}),\n        onSetClass: (val) => dispatch({type: actionTypes.SET_CLASS, val}),\n        onRemoveFlight: () => dispatch({type: actionTypes.REMOVE_FLIGHT}),\n        /* onBookFlight: (carrier, dCity, aCity, date, passengers, bags, carryOn, classType, totalPrice) => dispatch({type: actionTypes.BOOK_FLIGHT, flightData: {\n            carrier: carrier, \n            dCity: dCity, \n            aCity: aCity, \n            date: date, \n            passengers: passengers,\n            bags: bags,\n            carryOn: carryOn,\n            class: classType,\n            totalPrice: totalPrice\n            }\n        }), */\n        onBookFlight: () => dispatch({type: actionTypes.BOOK_FLIGHT}),\n        onInitBookedFlights: (flights) => dispatch({type: actionTypes.INIT_BOOKED_FLIGHTS, flights})\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectFlight);"]},"metadata":{},"sourceType":"module"}